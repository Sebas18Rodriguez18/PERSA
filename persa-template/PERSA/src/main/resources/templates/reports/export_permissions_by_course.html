<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base_reports}"> 

<th:block layout:fragment="report_title">
    Reporte permisos por ficha
</th:block>

<th:block layout:fragment="report_info">
     <h4 th:if="${course != null}" th:text="|Ficha: ${course.number_group ?: course.id} - ${course.career.name}|" style="font-size: 14px; margin-top: 10px;"></h4>
</th:block>

<div layout:fragment="content">
    <section id="results">
        <div th:if="${course != null and apprentices != null and not apprentices.empty}">
            
            <th:block th:each="apprentice : ${apprentices}">
                <h5 th:text="|Aprendiz: ${apprentice.fullname} (Documento: ${apprentice.document})|" style="font-size: 13px; margin-top: 15px;"></h5>

                <div th:if="${apprentice.permissions == null or apprentice.permissions.empty}">
                    <p style="font-size: 12px; margin-left: 10px;">No tiene permisos registrados.</p>
                </div>

                <div th:unless="${apprentice.permissions == null or apprentice.permissions.empty}">
                    <table id="reportTable">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Tipo de Permiso</th>
                                <th>Ubicaci√≥n</th>
                                <th>Motivo</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="permission : ${apprentice.permissions}">
                                <td th:text="${#temporals.format(permission.permission_date, 'dd/MM/yyyy')}"></td>
                                <td th:text="${permission.permissionType?.name ?: 'N/A'}"></td>
                                <td th:text="${permission.location?.name ?: 'N/A'}"></td>
                                <td th:text="${permission.reasons}"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="page-break-after: avoid; height: 10px;"></div>
            </th:block>
        </div>
        <div th:unless="${course != null and apprentices != null and not apprentices.empty}">
            <p><strong>No existen resultados en el reporte.</strong></p>
        </div>
    </section>
</div>
</html>