<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base_reports}"> 

<th:block layout:fragment="report_title">
    Reporte permisos por aprendiz
</th:block>

<th:block layout:fragment="report_info">
    <h4 th:if="${apprentice}" th:text="|Aprendiz: ${apprentice.fullname} (Documento: ${apprentice.document})|" style="font-size: 14px; margin-top: 10px;"></h4>
</th:block>

<div layout:fragment="content">
    <section id="results">
        <div th:if="${permissions != null and not permissions.empty}">
            <table id="reportTable">
                <thead>
                    <tr>
                        <th>Fecha de permiso</th>
                        <th>Hora de inicio</th>
                        <th>Hora de fin</th>
                        <th>Motivo</th>
                        <th>Sede</th>
                        <th>Tipo de permiso</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="permission : ${permissions}">
                        <td th:text="${#temporals.format(permission.permission_date, 'dd/MM/yyyy')}"></td>
                        <td th:text="${#temporals.format(permission.start_time, 'HH:mm')}"></td>
                        <td th:text="${#temporals.format(permission.end_time, 'HH:mm')}"></td>
                        <td th:text="${permission.reasons}"></td>
                        <td th:text="${permission.location?.name ?: 'N/A'}"></td>
                        <td th:text="${permission.permissionType?.name ?: 'N/A'}"></td>
                        <td th:text="${#strings.capitalize(#strings.toLowerCase(permission.status))}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div th:if="${permissions == null or permissions.empty}">
            <p><strong>No existen resultados en el reporte.</strong></p>
        </div>
    </section>
</div>
</html>